<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<div th:replace="~{admin/common/common :: head}"></div>
<body class="childrenBody">
<blockquote class="layui-elem-quote quoteBox">
    <div class="layui-inline">
        <div class="layui-input-inline">
            <input id="areaSearch" type="text" class="layui-input searchVal" placeholder="请输入区域名"/>
        </div>
        <a class="search_btn layui-btn" data-type="reload" id="houseRefresh">搜索</a>
    </div>
    <div class="layui-inline">
        <a id="houseDelete" class="layui-btn layui-btn-danger layui-btn-normal">批量删除</a>
    </div>
</blockquote>

<table id="houseList" lay-filter="houseList"></table>
<div th:replace="~{admin/common/common :: script}"></div>

<script type="text/javascript">
    layui.use(['table'], function () {
        var table = layui.table;

        var tableIns = table.render({
            elem: '#houseList' //指定原始表格元素选择器（推荐id选择器）
            , id: 'hosueListTable'
            , url: '/data/house/list'
            , page: true
            , height: "full-125"
            , limit: 10
            , limits: [10, 30, 50, 70, 100]
            , request: {
                pageName: 'curr' //页码的参数名称，默认：page
            }
            , parseData: function (res) { //res 即为原始返回的数据
                return {
                    "code": res.code, //解析接口状态
                    "msg": res.msg, //解析提示文本
                    "count": res.pageBean.count, //解析数据长度
                    "data": res.pageBean.data //解析数据列表
                };
            }
            , cols: [ //二维数组的符号不要连在一起，因为[\[…\]]之间的表达式在thymeleaf被认为是内联表达式,会渲染错误
                [
                    {field: 'id', checkbox: true, fixed: 'left', width: 50}
                    , {field: 'cityCnName', title: '城市', align: 'center'}
                    , {field: 'regionCnName', title: '区域', align: 'center'}
                    , {field: 'sourceUrl', title: '源网址', align: 'center'}
                    , {field: 'imgHref', title: '封面图', align: 'center'}
                    , {field: 'createTime', title: '创建时间', align: 'center', templet: function (d) {
                    return moment(d.createTime).format("YYYY-MM-DD");
                }}
                    , {field: 'title', title: '标题', align: 'center'}
                    , {field: 'area', title: '面积', align: 'center'}
                    , {field: 'price', title: '价格', align: 'center'}
                    , {field: 'houseType', title: '户型', align: 'center'}
                    , {field: 'rentWay', title: '出租方式', align: 'center'}
                    , {field: 'community', title: '小区', align: 'center'}
                    , {field: 'address', title: '地址', align: 'center'}
                    , {
                    field: 'description', title: '描述', align: 'center', templet: function (d) {
                        return d.description.substring(0, 50);
                    }
                }
                    , {title: '操作', toolbar: '#houseListBar', align: "center", fixed: "right"}
                ]
            ]
        });
    });

</script>
</body>
</html>